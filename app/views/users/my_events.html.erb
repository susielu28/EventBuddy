<h1>Events I'm Attending</h1>

<div class="container">
  <div class="row">
    <div class="col-md-6">
      <div style="width: 100%; height: 600px;"
        data-controller="map"
        data-map-markers-value="<%= @my_events_markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
    <div class="col-md-6">
      <% @events.each do |event| %>
        <div class="col-md-12">
          <%= link_to event_path(event), class: "card-link" do %>
            <div class="card mb-4">
              <% if event.photo.attached? %>
                <%= cl_image_tag event.photo.key, height: 150, crop: :fill, class: "card-img-top" %>
              <% else %>
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/0b/SFOperaHouse2_%288189967420%29.jpg" alt="default event picture" class="card-img-top">
              <% end %>
              <div class="card-body">
                <h5 class="card-title"><%= event.name %></h5>
                <p class="card-text">Venue: <%= event.venue %></p>
                <p class="card-text">Date: <%= event.date.strftime('%B %d, %Y') %></p>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
